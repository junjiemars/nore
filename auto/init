#### -*- mode:sh -*- vim:ft=sh
####
## No More than a C build system for clang, gcc and msvc.
## https://github.com/junjiemars/nore
####
## init
####


NM_MAKEFILE=$NM_OUT/Makefile

NM_AUTO_H=$NM_OUT/nore.h

NM_AUTOTEST=$NM_OUT/autotest
NM_AUTOCONF_ERR=$NM_OUT/autoconf.err


# check the echo's "\c" capability
if echo "test\c" | grep c >/dev/null; then
	nm_c=
else
	nm_c='\c'
fi

# check the echo's "-n" option
if echo -n test | grep n >/dev/null; then
  echo_n_opt=
else
  echo_n_opt=-n
fi


# creating Makefile

cat << END > Makefile
# Makefile
#
# ${gen_by_nore}
#


.PHONY: build reset test task

default: build

clean:
	\$(MAKE) -f $NM_OUT/Makefile clean

reset:
	\$(RM) -r Makefile $NM_OUT

test:
	\$(MAKE) -f $NM_OUT/Makefile test

task:
	\$(MAKE) -f $NM_OUT/Makefile \$(TASK)

END

