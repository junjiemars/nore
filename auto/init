
# init

NM_MAKEFILE=$NM_OUT/Makefile

NM_AUTO_H=$NM_OUT/nm_auto.h

NM_AUTOTEST=$NM_OUT/autotest
NM_AUTOCONF_ERR=$NM_OUT/autoconf.err


# check the echo's "-n" option and "\c" capability

if echo "test\c" | grep c >/dev/null; then

  if echo -n test | grep n >/dev/null; then
    nm_n=
    nm_c=

  else
    nm_n=-n
    nm_c=
  fi

else
  nm_n=
  nm_c='\c'
fi


# creating Makefile

cat << END > Makefile

.PHONY: build reset test task

default: build

clean:
	\$(MAKE) -f $NM_OUT/Makefile clean

reset:
	\$(RM) -r Makefile $NM_OUT

test:
	\$(MAKE) -f $NM_OUT/Makefile test

task:
	\$(MAKE) -f $NM_OUT/Makefile \$(TASK)

END

