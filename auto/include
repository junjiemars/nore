#### -*- mode:sh -*- vim:ft=sh
####
## No More than a C build system for clang, gcc and msvc.
## https://github.com/junjiemars/nore
####
## include
####


echo $echo_n_opt "checking for $include ...$echo_c_cap"

cat << END >> $NM_AUTO_ERR

----------------------------------------
checking for $include

END


autotest_c="$NM_AUTOTEST.c"
if [ -n "$feature_cxx" ]; then
	autotest_c="$NM_AUTOTEST.cc"
fi

cat << END > $autotest_c

#include <$include>

int main(void) {
    return 0;
}

END


nm_test="$CC ${bin_out}$NM_AUTOTEST $autotest_c"

`$nm_test >> $NM_AUTO_ERR 2>&1`

nm_found=no

if [ -x $NM_AUTOTEST ]; then

  nm_found=yes

  echo " found"

  have=$include . ${NORE_ROOT}/auto/have_header

else

  echo " not found"

  echo "----------"  	 >> $NM_AUTO_ERR
  cat  $autotest_c 	   >> $NM_AUTO_ERR
  echo "----------"  	 >> $NM_AUTO_ERR
  echo $nm_test    	   >> $NM_AUTO_ERR
  echo "----------"    >> $NM_AUTO_ERR
fi

rm -rf $NM_AUTOTEST*
